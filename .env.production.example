# KimDB Production Environment Variables
# 사용: cp .env.production.example .env.production && vim .env.production

# ============================================================================
# 서버 설정
# ============================================================================
NODE_ENV=production
LOG_LEVEL=info
PORT=40000
WS_PORT=8080

# ============================================================================
# 보안 (중요: 프로덕션에서 반드시 변경!)
# ============================================================================
# JWT 시크릿 (최소 64자, 강력한 임의 문자열)
JWT_SECRET=your-super-secret-jwt-key-minimum-64-characters-change-in-production
REFRESH_SECRET=your-super-secret-refresh-key-minimum-64-characters-change-in-production

# API 키
API_KEY=your-api-key-change-in-production

# ============================================================================
# 데이터베이스 설정
# ============================================================================
# SQLite 경로
DB_PATH=./data/kimdb.sqlite

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=changeme
REDIS_DB=0

# ============================================================================
# CORS 설정
# ============================================================================
CORS_ORIGIN=https://example.com,https://app.example.com
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600

# ============================================================================
# 성능 튜닝
# ============================================================================
# 버퍼 설정 (HyperScale)
BUFFER_SIZE=10000
FLUSH_INTERVAL=100
SHARD_COUNT=8

# 커넥션 풀
CONNECTION_POOL_SIZE=100
CONNECTION_TIMEOUT=30000

# 쿼리 타임아웃 (ms)
QUERY_TIMEOUT=5000

# ============================================================================
# 모니터링 & 로깅
# ============================================================================
# Prometheus 메트릭
METRICS_ENABLED=true
METRICS_PORT=9100

# 구조화된 로깅
LOG_FORMAT=json
LOG_LEVEL=info

# ============================================================================
# 백업 & 복구
# ============================================================================
# 자동 백업 활성화
BACKUP_ENABLED=true
BACKUP_INTERVAL=3600000  # 1시간 (ms)
BACKUP_PATH=./backups
BACKUP_RETENTION_DAYS=30

# WAL (Write-Ahead Logging)
WAL_ENABLED=true
WAL_PATH=./wal-logs

# ============================================================================
# 레이트 리미팅
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60000  # 1분 (ms)
RATE_LIMIT_MAX=1000      # 요청/분

# IP별 레이트 리미트
RATE_LIMIT_PER_IP=100
RATE_LIMIT_WHITELIST=127.0.0.1

# ============================================================================
# 외부 통합
# ============================================================================
# Slack 알림
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# 이메일 설정
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password

# ============================================================================
# SSL/TLS
# ============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ============================================================================
# 모니터링 (Grafana)
# ============================================================================
GRAFANA_PASSWORD=change-this-password
GRAFANA_ADMIN_USER=admin

# ============================================================================
# 메모리 설정
# ============================================================================
NODE_OPTIONS=--max-old-space-size=4096

# ============================================================================
# 타임존
# ============================================================================
TZ=UTC
